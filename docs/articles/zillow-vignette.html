<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Exploring Zillow Real Estate Data: Introduction to realEstAnalytics • realEstAnalytics</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Exploring Zillow Real Estate Data: Introduction to realEstAnalytics">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">realEstAnalytics</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/zillow-vignette.html">Exploring Zillow Real Estate Data: Introduction to realEstAnalytics</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/xiyuansun/realEstAnalytics">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Exploring Zillow Real Estate Data: Introduction to realEstAnalytics</h1>
                        <h4 class="author">Steve Harms</h4>
            
            <h4 class="date">2019-05-05</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/xiyuansun/realEstAnalytics/blob/master/vignettes/zillow-vignette.Rmd"><code>vignettes/zillow-vignette.Rmd</code></a></small>
      <div class="hidden name"><code>zillow-vignette.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>Zillow has collected and analyzed enormous amounts of property data in order to help prospective buyers, sellers, and renters make informed decisions in their real estate transactions. Zillow has been kind enough to make much of this data available to the public through its APIs and other locations on their site. This vignette is an introduction to the <code>realEstAnalytics</code> package, which contains several functions that supply calls to Zillow’s Real Estate API. The returned data are available in their raw XML form, or in a tidy format that allows for quick and clean manipulation and analysis of the data.</p>
</div>
<div id="installing-and-loading-the-realestanalytics-package" class="section level2">
<h2 class="hasAnchor">
<a href="#installing-and-loading-the-realestanalytics-package" class="anchor"></a>Installing and Loading the realEstAnalytics Package</h2>
<p>The <code>realEstAnalytics</code> package is hosted on github. It can be installed with the <code>devtools</code> package, and then loaded as with any other <code>R</code> package.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#installing and loading realEstAnalytics</span>
devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">'xiyuansun/realEstAnalytics'</span>)

<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(realEstAnalytics)</code></pre></div>
<p><code>realEstAnalytics</code> does not have any dependencies other than the latest version of <code>R</code>, but does import functions from a number of other packages to aid in reading and tidying the XML data. See the documentation for this list, and be careful with the namespaces of any other packages you may be using in conjunction with <code>realEstAnalytics</code>.</p>
</div>
<div id="obtaining-and-setting-your-zillow-web-service-id-api-key" class="section level2">
<h2 class="hasAnchor">
<a href="#obtaining-and-setting-your-zillow-web-service-id-api-key" class="anchor"></a>Obtaining and setting your Zillow Web Service ID (API key)</h2>
<p>Before you can make any calls to any of Zillow’s APIs, you must register with Zillow by signing up at <a href="https://www.zillow.com/howto/api/APIOverview.htm" class="uri">https://www.zillow.com/howto/api/APIOverview.htm</a> (make sure you read the Terms of Service!). Once you have registered, Zillow will send you a unique API key, formally called a ZWSID. Keep this in a safe, non-public place to be referenced later.</p>
<p>Before we go further, it should be noted that Zillow will prevent excessive calls, and thus may block your ZWSID if you issue more than 1,000 API requests in a day (so be careful!).</p>
<p>Once you have obtained your ZWSID, you can set it in your <code>R</code> session with the <code><a href="../reference/zillow_web_service_id.html">zillow_web_service_id()</a></code> function and retrieve it with <code><a href="https://www.rdocumentation.org/packages/base/topics/options">getOption('ZillowR-zws_id')</a></code> :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#set the ZWS_ID</span>
<span class="kw"><a href="../reference/zillow_web_service_id.html">set_zillow_web_service_id</a></span>(<span class="st">'YOUR_API_KEY'</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#retrieve the current ZWS_ID in use</span>
zapi_key =<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/options">getOption</a></span>(<span class="st">'ZillowR-zws_id'</span>)</code></pre></div>
<p>It is helpful to set this when you start your session, so that you do not need to continually reference it if making many calls to the API.</p>
</div>
<div id="returning-property-information-with-getupdatedpropertydetailsgetdeepsearchresults-and-getdeepsearchresults_dataframe" class="section level2">
<h2 class="hasAnchor">
<a href="#returning-property-information-with-getupdatedpropertydetailsgetdeepsearchresults-and-getdeepsearchresults_dataframe" class="anchor"></a>Returning Property Information with <code>GetUpdatedPropertyDetails</code>,<code>GetDeepSearchResults</code> and <code>GetDeepSearchResults_dataframe</code>
</h2>
<p>Suppose we’re interested in moving to Newton, KS, and are considering a number of different homes in the area for purchase. One particular home we’re interested in is located at 600 S. Quail Ct. in Newton. We can obtain information on the property using the <code>GetDeepSearchResults</code> function, which will pull the data corresponding to all of the Zillow Property IDs at a given address.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/GetDeepSearchResults.html">GetDeepSearchResults</a></span>(<span class="st">'600 S. Quail Ct.'</span>, <span class="dt">city=</span><span class="st">'Newton'</span>,<span class="dt">state=</span><span class="st">'KS'</span>, <span class="dt">zipcode=</span><span class="ot">NULL</span>,
                     <span class="dt">api_key=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/options">getOption</a></span>(<span class="st">'ZillowR-zws_id'</span>))
<span class="co">#&gt; # A tibble: 1 x 26</span>
<span class="co">#&gt;   address zipcode city  state   lat  long region_name region_id type </span>
<span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;</span>
<span class="co">#&gt; 1 600 S ~ 67114   Newt~ KS     38.0 -97.3 Newton      19619     city </span>
<span class="co">#&gt; # ... with 17 more variables: zestimate &lt;dbl&gt;, zest_lastupdated &lt;date&gt;,</span>
<span class="co">#&gt; #   zest_monthlychange &lt;dbl&gt;, zest_percentile &lt;dbl&gt;, zestimate_low &lt;dbl&gt;,</span>
<span class="co">#&gt; #   zestimate_high &lt;dbl&gt;, zpid &lt;chr&gt;, bathrooms &lt;dbl&gt;, bedrooms &lt;dbl&gt;,</span>
<span class="co">#&gt; #   finishedSqFt &lt;dbl&gt;, lastSoldDate &lt;chr&gt;, lastSoldPrice &lt;dbl&gt;,</span>
<span class="co">#&gt; #   lotSizeSqFt &lt;dbl&gt;, taxAssessment &lt;dbl&gt;, taxAssessmentYear &lt;dbl&gt;,</span>
<span class="co">#&gt; #   totalRooms &lt;dbl&gt;, yearBuilt &lt;dbl&gt;</span></code></pre></div>
<p>The function returns a dataframe with variables corresponding to address and geographic location, as well as the property’s Zillow property ID (<code>zpid</code>) and information corresponding to the Zestimate, which is Zillow’s proprietary algorithm for estimating the property value. Additionally, there are variables corresponding to the living space of the house (<code>bedrooms</code>,<code>bathrooms</code>,<code>finishedSqFt</code>, etc.), and property tax information. For example, our property has a Zillow estimated value of $230,830, which is quite close to the last sale price of $230,000 and well above the assessed property tax value of $214,800.</p>
<p>Note that we did not need to supply a zip code argument. In order for <code>DeepSearchResults</code> to work, we need only to specify either the city/state combination OR the zipcode. Sometimes it may help the search to be more specific by specifying the zipcode. The following code will produce the same result using only zipcode but no city/state combination:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/GetDeepSearchResults.html">GetDeepSearchResults</a></span>(<span class="st">'600 S. Quail Ct.'</span>, <span class="dt">zipcode=</span><span class="dv">67114</span>,
                     <span class="dt">rentzestimate=</span><span class="ot">TRUE</span>, <span class="dt">api_key=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/options">getOption</a></span>(<span class="st">'ZillowR-zws_id'</span>))
<span class="co">#&gt; # A tibble: 1 x 31</span>
<span class="co">#&gt;   address zipcode city  state   lat  long region_name region_id type </span>
<span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;</span>
<span class="co">#&gt; 1 600 S ~ 67114   Newt~ KS     38.0 -97.3 Newton      19619     city </span>
<span class="co">#&gt; # ... with 22 more variables: zestimate &lt;dbl&gt;, zest_lastupdated &lt;date&gt;,</span>
<span class="co">#&gt; #   zest_monthlychange &lt;dbl&gt;, zest_percentile &lt;dbl&gt;, zestimate_low &lt;dbl&gt;,</span>
<span class="co">#&gt; #   zestimate_high &lt;dbl&gt;, rentzestimate &lt;dbl&gt;, rent_lastupdated &lt;date&gt;,</span>
<span class="co">#&gt; #   rent_monthlychange &lt;dbl&gt;, rentzestimate_low &lt;dbl&gt;,</span>
<span class="co">#&gt; #   rentzestimate_high &lt;dbl&gt;, zpid &lt;chr&gt;, bathrooms &lt;dbl&gt;, bedrooms &lt;dbl&gt;,</span>
<span class="co">#&gt; #   finishedSqFt &lt;dbl&gt;, lastSoldDate &lt;chr&gt;, lastSoldPrice &lt;dbl&gt;,</span>
<span class="co">#&gt; #   lotSizeSqFt &lt;dbl&gt;, taxAssessment &lt;dbl&gt;, taxAssessmentYear &lt;dbl&gt;,</span>
<span class="co">#&gt; #   totalRooms &lt;dbl&gt;, yearBuilt &lt;dbl&gt;</span></code></pre></div>
<p>Additionally, we set <code>rentzestimate=TRUE</code> in the previous example, which tells the API call to return the Zillow estimated rental price data for the property in addition to the Zestimate for the property.</p>
<p>One note of caution when using <code>GetDeepSearchResults</code> is that it will return the results for ALL of the Zillow property IDs at an address, which can cause difficulties if one is trying to get results for multiple addresses at once, such as using the function in conjunction with the <code><a href="https://www.rdocumentation.org/packages/base/topics/apply">apply()</a></code> family of functions. To avoid this, one may be able to use <code>GetDeepSearchResults_dataframe</code>, which takes a data frame of addresses as its arguments.</p>
<p>Suppose we want to look at the results for several results at once, and we have the data stored in a data frame named <code>newtonaddresses</code> in our environment. To get the search results for the full data frame, all we need to do is supply <code>GetDeepSearchResults_dataframe</code> with the data and the column numbers corresponding to the geographic information:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#there are 32 addresses, some in different zipcodes, to look up</span>
<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/head">head</a></span>(newtonaddresses)
<span class="co">#&gt; # A tibble: 6 x 4</span>
<span class="co">#&gt;   address            zipcode city         state</span>
<span class="co">#&gt;   &lt;chr&gt;              &lt;chr&gt;   &lt;chr&gt;        &lt;chr&gt;</span>
<span class="co">#&gt; 1 2137 Beltline      67114   Newton       KS   </span>
<span class="co">#&gt; 2 410 Victoria Rd    67114   Newton       KS   </span>
<span class="co">#&gt; 3 2801 Goldenrod Rd. 67117   North Newton KS   </span>
<span class="co">#&gt; 4 105 S Logan St.    67114   Newton       KS   </span>
<span class="co">#&gt; 5 839 Meadowlark Ln  67114   Newton       KS   </span>
<span class="co">#&gt; 6 1412 W. 8th St.    67114   Newton       KS</span>
<span class="co">#GetDeepSearchResults_dataframe will get the info for us:</span>

<span class="kw"><a href="../reference/GetDeepSearchResults_dataframe.html">GetDeepSearchResults_dataframe</a></span>(<span class="dt">.df=</span>newtonaddresses,
                               <span class="dt">col.address=</span><span class="dv">1</span> , <span class="dt">col.zipcode=</span><span class="dv">2</span> , <span class="dt">col.city=</span><span class="dv">3</span> , <span class="dt">col.state=</span><span class="dv">4</span>,
                               <span class="dt">api_key=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/options">getOption</a></span>(<span class="st">'ZillowR-zws_id'</span>))
<span class="co">#&gt; # A tibble: 37 x 26</span>
<span class="co">#&gt;    address zipcode city  state   lat  long region_name region_id type </span>
<span class="co">#&gt;    &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;</span>
<span class="co">#&gt;  1 2137 B~ 67114   Newt~ KS     38.0 -97.4 Newton      19619     city </span>
<span class="co">#&gt;  2 410 Vi~ 67114   Newt~ KS     38.0 -97.3 Newton      19619     city </span>
<span class="co">#&gt;  3 2801 G~ 67117   Nort~ KS     38.1 -97.4 North Newt~ 46801     city </span>
<span class="co">#&gt;  4 105 S ~ 67114   Newt~ KS     38.0 -97.3 Newton      19619     city </span>
<span class="co">#&gt;  5 839 Me~ 67114   Newt~ KS     38.0 -97.3 Newton      19619     city </span>
<span class="co">#&gt;  6 1412 W~ 67114   Newt~ KS     38.1 -97.4 Newton      19619     city </span>
<span class="co">#&gt;  7 919 N ~ 67114   Newt~ KS     38.1 -97.3 Newton      19619     city </span>
<span class="co">#&gt;  8 2112 B~ 67114   Newt~ KS     38.0 -97.4 Newton      19619     city </span>
<span class="co">#&gt;  9 3000 A~ 67114   Newt~ KS     38.0 -97.3 Newton      19619     city </span>
<span class="co">#&gt; 10 612 Qu~ 67114   Newt~ KS     38.0 -97.3 Newton      19619     city </span>
<span class="co">#&gt; # ... with 27 more rows, and 17 more variables: zestimate &lt;dbl&gt;,</span>
<span class="co">#&gt; #   zest_lastupdated &lt;date&gt;, zest_monthlychange &lt;dbl&gt;,</span>
<span class="co">#&gt; #   zest_percentile &lt;dbl&gt;, zestimate_low &lt;dbl&gt;, zestimate_high &lt;dbl&gt;,</span>
<span class="co">#&gt; #   zpid &lt;chr&gt;, bathrooms &lt;dbl&gt;, bedrooms &lt;dbl&gt;, finishedSqFt &lt;dbl&gt;,</span>
<span class="co">#&gt; #   lastSoldDate &lt;chr&gt;, lastSoldPrice &lt;dbl&gt;, lotSizeSqFt &lt;dbl&gt;,</span>
<span class="co">#&gt; #   taxAssessment &lt;dbl&gt;, taxAssessmentYear &lt;dbl&gt;, totalRooms &lt;dbl&gt;,</span>
<span class="co">#&gt; #   yearBuilt &lt;dbl&gt;</span></code></pre></div>
<p>If we want to find out more characteristics of the property that we could not find with <code>GetDeepSearchResults</code>, the function <code>GetUpdatedPropertyDetails</code> may help us out. It takes a Zillow Property ID and returns much of the non-value information from the search functions, as well as additional information about parking, HVAC, appliances, and more:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">exdetails &lt;-<span class="st"> </span><span class="kw"><a href="../reference/GetUpdatedPropertyDetails.html">GetUpdatedPropertyDetails</a></span>(<span class="dt">zpid=</span><span class="st">'93961896'</span> ,
                           <span class="dt">api_key=</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/options">getOption</a></span>(<span class="st">'ZillowR-zws_id'</span>))

<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(exdetails)
<span class="co">#&gt;  [1] "address"          "zipcode"          "city"            </span>
<span class="co">#&gt;  [4] "state"            "lat"              "long"            </span>
<span class="co">#&gt;  [7] "useCode"          "bedrooms"         "bathrooms"       </span>
<span class="co">#&gt; [10] "finishedSqFt"     "lotSizeSqFt"      "yearBuilt"       </span>
<span class="co">#&gt; [13] "numFloors"        "numRooms"         "basement"        </span>
<span class="co">#&gt; [16] "roof"             "exteriorMaterial" "parkingType"     </span>
<span class="co">#&gt; [19] "heatingSources"   "heatingSystem"    "coolingSystem"   </span>
<span class="co">#&gt; [22] "appliances"       "floorCovering"    "rooms"           </span>
<span class="co">#&gt; [25] "currentMonth"     "total"</span></code></pre></div>
</div>
<div id="finding-comparable-properties-with-getcomps-and-getdeepcomps" class="section level2">
<h2 class="hasAnchor">
<a href="#finding-comparable-properties-with-getcomps-and-getdeepcomps" class="anchor"></a>Finding Comparable Properties with <code>GetComps</code> and <code>GetDeepComps</code>
</h2>
<p>For every property, Zillow calculates a “Compscore” of comparable properties in the area. The ‘Compscore’ attribute is representative of the relevance of each property to the target, with a score of 0 being the closest and higher Compscores being less relevant. We have two options for API calls: <code>GetComps</code>, which retrieves only geographic, Zestimate, and Compscore information for the comparables, and <code>GetDeepComps</code>, which returns everything from <code>GetComps</code> as well as the specific property data that one would acquire through <code>GetDeepSearchResults</code>.</p>
<p>We can retrieve up to 25 comparable properties with the <code>count</code> argument, although one should be careful not to exceed Zillow’s API limit by calling this repeatedly. Note here that, instead of an address, these functions take the specific Zillow property ID (zpid) for the property, which can be found by first calling <code>GetDeepSearchResults</code> for the address.</p>
<p>Are we getting a good deal on our home at 600 S. Quail Court? We can look at the information on comparable recently sold properties in the area:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="co">#retrieve the zpid from GetDeepSearchResults</span>
zpidex &lt;-<span class="st"> </span><span class="kw"><a href="../reference/GetDeepSearchResults.html">GetDeepSearchResults</a></span>(<span class="st">'600 S. Quail Ct.'</span>, <span class="dt">zipcode=</span><span class="dv">67114</span>,
                     <span class="dt">rentzestimate=</span><span class="ot">TRUE</span>, <span class="dt">api_key=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/options">getOption</a></span>(<span class="st">'ZillowR-zws_id'</span>))<span class="op">$</span>zpid

<span class="co">#GetComps for the '600 S. Quail Ct.' address</span>
<span class="kw"><a href="../reference/GetComps.html">GetComps</a></span>(zpidex, <span class="dt">count=</span><span class="dv">10</span>, <span class="dt">rentzestimate=</span><span class="ot">TRUE</span>, <span class="dt">api_key =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/options">getOption</a></span>(<span class="st">'ZillowR-zws_id'</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/dim">dim</a></span>()
<span class="co">#&gt; [1] 11 22</span>

<span class="co">#GetDeepComps returns the same information as GetComps, with additional property data</span>
deepcomps &lt;-<span class="st"> </span><span class="kw"><a href="../reference/GetDeepComps.html">GetDeepComps</a></span>(zpidex, <span class="dt">count=</span><span class="dv">10</span>, <span class="dt">rentzestimate=</span><span class="ot">FALSE</span>, <span class="dt">api_key =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/options">getOption</a></span>(<span class="st">'ZillowR-zws_id'</span>))

<span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(deepcomps)
<span class="co">#&gt; Classes 'tbl_df', 'tbl' and 'data.frame':    11 obs. of  27 variables:</span>
<span class="co">#&gt;  $ address           : chr  "600 S Quail Ct" "919 N Blaine St" "2137 Beltline" "2112 Beltline Ct" ...</span>
<span class="co">#&gt;  $ zipcode           : chr  "67114" "67114" "67114" "67114" ...</span>
<span class="co">#&gt;  $ city              : chr  "Newton" "Newton" "Newton" "Newton" ...</span>
<span class="co">#&gt;  $ state             : chr  "KS" "KS" "KS" "KS" ...</span>
<span class="co">#&gt;  $ lat               : num  38 38.1 38 38 38 ...</span>
<span class="co">#&gt;  $ long              : num  -97.3 -97.3 -97.4 -97.4 -97.3 ...</span>
<span class="co">#&gt;  $ region_name       : chr  "Newton" "Newton" "Newton" "Newton" ...</span>
<span class="co">#&gt;  $ region_id         : chr  "19619" "19619" "19619" "19619" ...</span>
<span class="co">#&gt;  $ type              : chr  "city" "city" "city" "city" ...</span>
<span class="co">#&gt;  $ zestimate         : num  229365 86515 271009 199880 192078 ...</span>
<span class="co">#&gt;  $ zest_lastupdated  : Date, format: "2019-05-04" "2019-05-04" ...</span>
<span class="co">#&gt;  $ zest_monthlychange: num  -42 129 2114 1265 2485 ...</span>
<span class="co">#&gt;  $ zest_percentile   : num  96 48 98 93 92 86 84 98 98 97 ...</span>
<span class="co">#&gt;  $ zestimate_low     : num  213309 82189 257459 189886 182474 ...</span>
<span class="co">#&gt;  $ zestimate_high    : num  243127 90841 284559 209874 201682 ...</span>
<span class="co">#&gt;  $ zpid              : chr  "1340244" "1339246" "109818062" "109782360" ...</span>
<span class="co">#&gt;  $ compscore         : num  NA 16 10 11 6 6 9 7 6 5 ...</span>
<span class="co">#&gt;  $ bathrooms         : num  3 2 3 2 3 3 3 3 3 3 ...</span>
<span class="co">#&gt;  $ bedrooms          : num  4 3 6 3 4 3 4 4 5 4 ...</span>
<span class="co">#&gt;  $ finishedSqFt      : num  1726 1408 2669 1355 2570 ...</span>
<span class="co">#&gt;  $ lastSoldDate      : chr  "06/01/2007" "10/18/2018" "06/15/2018" "09/21/2018" ...</span>
<span class="co">#&gt;  $ lastSoldPrice     : num  230000 NA 262900 193950 185000 ...</span>
<span class="co">#&gt;  $ lotSizeSqFt       : num  33024 13068 13503 11325 13939 ...</span>
<span class="co">#&gt;  $ taxAssessment     : num  214800 71200 228000 187430 171970 ...</span>
<span class="co">#&gt;  $ taxAssessmentYear : num  2018 2018 2018 2018 2018 ...</span>
<span class="co">#&gt;  $ totalRooms        : num  8 5 18 5 10 11 7 7 7 7 ...</span>
<span class="co">#&gt;  $ yearBuilt         : num  1993 1964 2008 2017 1994 ...</span>

<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/summary">summary</a></span>(deepcomps<span class="op">$</span>zestimate)
<span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span>
<span class="co">#&gt;   86515  178688  229365  213149  265037  271457</span></code></pre></div>
</div>
<div id="retrieving-basic-property-value-estimates-with-getzestimate" class="section level2">
<h2 class="hasAnchor">
<a href="#retrieving-basic-property-value-estimates-with-getzestimate" class="anchor"></a>Retrieving Basic Property Value Estimates with <code>GetZestimate</code>
</h2>
<p>If you do not want all of the property information from <code>GetDeepSearchResults</code>, you can quickly retrieve the Zestimate and/or rent Zestimates of the property’s value with <code>GetZestimate</code>, using the Zillow property ID. This function will also take a vector of property IDs in the <code>zpid</code> argument if you want to retrieve more than one Zestimate at once:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#GetZestimate with a vector input</span>
<span class="kw"><a href="../reference/GetZestimates.html">GetZestimate</a></span>(<span class="dt">zpids=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(zpidex,<span class="dv">109818062</span>,<span class="dv">1341669</span>,<span class="dv">1341715</span>) ,
             <span class="dt">rentzestimate=</span><span class="ot">TRUE</span> , <span class="dt">api_key=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/options">getOption</a></span>(<span class="st">'ZillowR-zws_id'</span>))
<span class="co">#&gt; # A tibble: 4 x 20</span>
<span class="co">#&gt;   address zipcode city  state   lat  long region_name region_id type </span>
<span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;</span>
<span class="co">#&gt; 1 600 S ~ 67114   Newt~ KS     38.0 -97.3 Newton      19619     city </span>
<span class="co">#&gt; 2 2137 B~ 67114   Newt~ KS     38.0 -97.4 Newton      19619     city </span>
<span class="co">#&gt; 3 410 Vi~ 67114   Newt~ KS     38.0 -97.3 Newton      19619     city </span>
<span class="co">#&gt; 4 2109 S~ 67114   Newt~ KS     38.0 -97.3 Newton      19619     city </span>
<span class="co">#&gt; # ... with 11 more variables: zestimate &lt;dbl&gt;, zest_lastupdated &lt;date&gt;,</span>
<span class="co">#&gt; #   zest_monthlychange &lt;dbl&gt;, zest_percentile &lt;dbl&gt;, zestimate_low &lt;dbl&gt;,</span>
<span class="co">#&gt; #   zestimate_high &lt;dbl&gt;, rentzestimate &lt;dbl&gt;, rent_lastupdated &lt;date&gt;,</span>
<span class="co">#&gt; #   rent_monthlychange &lt;dbl&gt;, rentzestimate_low &lt;dbl&gt;,</span>
<span class="co">#&gt; #   rentzestimate_high &lt;dbl&gt;</span></code></pre></div>
</div>
<div id="combining-the-api-calls-to-build-a-local-housing-dataset-note-of-caution" class="section level2">
<h2 class="hasAnchor">
<a href="#combining-the-api-calls-to-build-a-local-housing-dataset-note-of-caution" class="anchor"></a>Combining the API Calls to Build a Local Housing Dataset: Note of Caution</h2>
<p>Suppose we want to build a larger dataset based on only our original address. This would facilitate an analysis of recent property sales in the general area to gain insight into the housing market. Conveniently, many of the functions in the realEstAnalytics package either (i) allow for vector inputs of Zillow property IDs, or (ii) allow for easy implementation of mapping functions like <code><a href="https://www.rdocumentation.org/packages/base/topics/apply">apply()</a></code> or <code><a href="https://purrr.tidyverse.org/reference/map.html">purrr::map()</a></code> to retrieve multiple pieces of data at once. Users familiar with the aforementioned mapping techniques should be able to see how one could (in theory) retrieve data on more than 100 properties in one stroke by applying a function to many property IDs at once, such as:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  ZPID_list <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/lapply">lapply</a></span>(GetDeepComps,
         <span class="dt">count=</span><span class="dv">25</span>,
         <span class="dt">api_key=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/options">getOption</a></span>(<span class="st">'ZillowR-zws_id'</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">bind_rows</span>() </code></pre></div>
<p>The above <code><a href="https://www.rdocumentation.org/packages/base/topics/lapply">lapply()</a></code> would take every Zillow property ID in <code>ZPID-list</code> and return 25 comparable properties’ information. While realEstAnalytics is not capable of restricting such a mass data pull, a few notes of caution are necessary:</p>
<ul>
<li>Your daily API calls are limited to 1000 per day</li>
<li>Repeatedly calling the API over a long list of inputs can eat these up quickly</li>
<li>In excess, it is a violation of Zillow’s Terms of Service and could result in termination of your key</li>
<li>Excessive calls could be construed as ‘spidering’ Zillow’s site, especially if you are chaining calls together or automating an API call</li>
<li>Zillow prefers that only a small number of properties’ details be displayed to any user at a given time</li>
</ul>
<p>Because of this, the authors of realEstAnalytics recommend only using the property information for a small number of homes at any given time. Anything larger than the packages sample data provided in <code>newtonhouses</code> puts the user at risk of trouble with Zillow. Just because you’re able to access data, does not mean you should abuse your priveleges.</p>
</div>
<div id="home-price-charts-with-getchart" class="section level2">
<h2 class="hasAnchor">
<a href="#home-price-charts-with-getchart" class="anchor"></a>Home Price Charts with <code>GetChart</code>
</h2>
<p>You can obtain a URL for a the Zestimates for a property with <code>GetChart</code>. The return from the API is a link to the image of the chart, which can be displayed in <code>R</code> with whatever package you prefer. Sometimes the URLs need some cleaning in order to correctly be able to read the image. For example, a 10 year historical valuation chart for our property can be called with:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(XML)
<span class="co">#Get Chart returns a list with the API's response</span>
<span class="co">#The chart URL is in the `response` element in the `url` attribute</span>
chartex &lt;-<span class="st"> </span><span class="kw"><a href="../reference/GetChart.html">GetChart</a></span>(<span class="dt">zpid =</span> <span class="dv">93961896</span>, <span class="dt">unit_type =</span> <span class="st">'dollar'</span>, <span class="dt">width =</span> <span class="dv">600</span>, <span class="dt">height =</span> <span class="dv">300</span>,
          <span class="dt">chartDuration =</span> <span class="st">'10years'</span>, <span class="dt">zws_id =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/options">getOption</a></span>(<span class="st">'ZillowR-zws_id'</span>))
XML<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/XML/topics/names.XMLNode">names.XMLNode</a></span>(chartex<span class="op">$</span>response)
<span class="co">#&gt;             url   graphsanddata </span>
<span class="co">#&gt;           "url" "graphsanddata"</span></code></pre></div>
</div>
<div id="geographic-region-time-series-data-with-get_zhvi_series-and-get_rental_listings" class="section level2">
<h2 class="hasAnchor">
<a href="#geographic-region-time-series-data-with-get_zhvi_series-and-get_rental_listings" class="anchor"></a>Geographic Region Time Series Data with <code>Get_ZHVI_series</code> and <code>Get_rental_listings</code>
</h2>
<p>Zillow also supplies some of its research data and aggregated listings data, hosted at <a href="https://www.zillow.com/research/data/" class="uri">https://www.zillow.com/research/data/</a> . These are static .csv files and don’t require a Zillow Web Service ID for download, however the <code>realEstAnalytics</code> package supplies functions that can read these files directly into <code>R</code> and save you the time of downloading and saving them locally. <code>Get_ZHVI_series</code> and <code>Get_rental_listings</code> read the .csv files and return a dataframe for a variety of different series for a specified <code>geography</code>. The options available for these two functions are listed below.</p>
<p><code><a href="../reference/get_ZHVI_series.html">get_ZHVI_series()</a></code>: ‘-’ implies argument default.</p>
<table class="table">
<thead><tr class="header">
<th>ZHVI Series Name</th>
<th align="center"><code>bedrooms</code></th>
<th align="center"><code>allhomes</code></th>
<th align="center"><code>tier</code></th>
<th align="center"><code>summary</code></th>
<th align="center"><code>other</code></th>
</tr></thead>
<tbody>
<tr class="odd">
<td>ZHVI Summary (Current Month)</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center"><code>TRUE</code></td>
<td align="center">-</td>
</tr>
<tr class="even">
<td>ZHVI All Homes (SFR, Condo/Co-op)</td>
<td align="center">-</td>
<td align="center"><code>TRUE</code></td>
<td align="center"><code>'ALL'</code></td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr class="odd">
<td>ZHVI All Homes- Bottom Tier</td>
<td align="center">-</td>
<td align="center"><code>TRUE</code></td>
<td align="center"><code>'B'</code></td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr class="even">
<td>ZHVI All Homes- Top Tier</td>
<td align="center">-</td>
<td align="center"><code>TRUE</code></td>
<td align="center"><code>'T'</code></td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr class="odd">
<td>ZHVI Condo/Co-op</td>
<td align="center"><code>'C'</code></td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr class="even">
<td>ZHVI Single-Family Homes</td>
<td align="center"><code>'SFR'</code></td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr class="odd">
<td>ZHVI 1-Bedroom</td>
<td align="center">1</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr class="even">
<td>ZHVI 2-Bedroom</td>
<td align="center">2</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr class="odd">
<td>ZHVI 3-Bedroom</td>
<td align="center">3</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr class="even">
<td>ZHVI 4-Bedroom</td>
<td align="center">4</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr class="odd">
<td>ZHVI 5+ Bedroom</td>
<td align="center">5</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr class="even">
<td>Median Home Value Per Sq Ft</td>
<td align="center">-</td>
<td align="center"><code>TRUE</code></td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center"><code>Median Home Price Per Sq Ft</code></td>
</tr>
<tr class="odd">
<td>Increasing Values (%)</td>
<td align="center">-</td>
<td align="center"><code>TRUE</code></td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center"><code>Increasing</code></td>
</tr>
<tr class="even">
<td>Decreasing Values (%)</td>
<td align="center">-</td>
<td align="center"><code>TRUE</code></td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center"><code>Decreasing</code></td>
</tr>
</tbody>
</table>
<p><code>get_rental_listings</code>: ‘-’ implies argument default.</p>
<table class="table">
<thead><tr class="header">
<th align="left">Median Rental List Price ($) Series</th>
<th align="center"><code>bedrooms</code></th>
<th align="center"><code>type</code></th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">SFR, Condo/Co-op</td>
<td align="center">-</td>
<td align="center"><code>'SFR/Condo'</code></td>
</tr>
<tr class="even">
<td align="left">Multifamily 5+ Units</td>
<td align="center">-</td>
<td align="center"><code>'Multi'</code></td>
</tr>
<tr class="odd">
<td align="left">Condo/Co-op</td>
<td align="center">-</td>
<td align="center"><code>'Condo/Co-op'</code></td>
</tr>
<tr class="even">
<td align="left">Duplex/Triplex</td>
<td align="center">-</td>
<td align="center"><code>'Duplex'</code></td>
</tr>
<tr class="odd">
<td align="left">Single-Family Residence</td>
<td align="center">-</td>
<td align="center"><code>'SFR'</code></td>
</tr>
<tr class="even">
<td align="left">Studio</td>
<td align="center">-</td>
<td align="center"><code>'Studio'</code></td>
</tr>
<tr class="odd">
<td align="left">1-Bedroom</td>
<td align="center">1</td>
<td align="center">-</td>
</tr>
<tr class="even">
<td align="left">2-Bedroom</td>
<td align="center">2</td>
<td align="center">-</td>
</tr>
<tr class="odd">
<td align="left">3-Bedroom</td>
<td align="center">3</td>
<td align="center">-</td>
</tr>
<tr class="even">
<td align="left">4-Bedroom</td>
<td align="center">4</td>
<td align="center">-</td>
</tr>
<tr class="odd">
<td align="left">5+ Bedroom</td>
<td align="center">5</td>
<td align="center">-</td>
</tr>
</tbody>
</table>
<p>The default for the <code>get_rental_listings</code> returns the median rental list price in absolute dollars, but each series is also available adjusted for size in dollars per square foot by specifying <code>rate='PerSqFt'</code>.</p>
<p>Each call also requires a specified geographic level. Currently options for the <code>geography</code> argument are:</p>
<ul>
<li>‘Metro’</li>
<li>‘City’</li>
<li>‘State’</li>
<li>‘Neighborhood’</li>
<li>‘Zip’</li>
<li>‘County’</li>
</ul>
<p>The ‘Metro’ level also includes the aggregated U.S. information.</p>
<p>To see an example, consider once again the home we’re interested in at 600 S. Quail Ct. in Newton, Kansas. We’ve already collected data on individual comparable properties in the area, but if we’re interested in property values of the larger city, county, and state, we can pull the most recent time series data and filter each for the area we’re interested in:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#What data do we want to filter?</span>
<span class="kw"><a href="../reference/GetDeepSearchResults.html">GetDeepSearchResults</a></span>(<span class="st">'600 S. Quail Ct.'</span>, <span class="dt">zipcode=</span><span class="dv">67114</span>,
                      <span class="dt">rentzestimate=</span><span class="ot">TRUE</span>, <span class="dt">api_key=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/options">getOption</a></span>(<span class="st">'ZillowR-zws_id'</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(zipcode,city,state,bedrooms,zestimate)

<span class="co">#Pull the data by state and zipcode for 4 bedrooms</span>
cityseries &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_ZHVI_series.html">get_ZHVI_series</a></span>(<span class="dt">bedrooms=</span><span class="dv">4</span>,<span class="dt">geography=</span><span class="st">"Zip"</span>) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(RegionName<span class="op">==</span><span class="st">'67114'</span>)
<span class="co">#&gt; Parsed with column specification:</span>
<span class="co">#&gt; cols(</span>
<span class="co">#&gt;   .default = col_double(),</span>
<span class="co">#&gt;   RegionName = col_character(),</span>
<span class="co">#&gt;   City = col_character(),</span>
<span class="co">#&gt;   State = col_character(),</span>
<span class="co">#&gt;   Metro = col_character(),</span>
<span class="co">#&gt;   CountyName = col_character()</span>
<span class="co">#&gt; )</span>
<span class="co">#&gt; See spec(...) for full column specifications.</span>

Stateseries &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_ZHVI_series.html">get_ZHVI_series</a></span>(<span class="dt">bedrooms=</span><span class="dv">4</span>,<span class="dt">geography=</span><span class="st">"State"</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(RegionName<span class="op">==</span><span class="st">'Kansas'</span>)
<span class="co">#&gt; Parsed with column specification:</span>
<span class="co">#&gt; cols(</span>
<span class="co">#&gt;   .default = col_double(),</span>
<span class="co">#&gt;   RegionName = col_character()</span>
<span class="co">#&gt; )</span>
<span class="co">#&gt; See spec(...) for full column specifications.</span>

<span class="co">#Also, collect all top-tier home values in the city and state</span>
citytop &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_ZHVI_series.html">get_ZHVI_series</a></span>(<span class="dt">allhomes=</span><span class="ot">TRUE</span>, <span class="dt">tier=</span><span class="st">'T'</span>, <span class="dt">geography=</span><span class="st">"Zip"</span>) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(RegionName<span class="op">==</span><span class="st">'67114'</span>)
<span class="co">#&gt; Parsed with column specification:</span>
<span class="co">#&gt; cols(</span>
<span class="co">#&gt;   .default = col_double(),</span>
<span class="co">#&gt;   RegionName = col_character(),</span>
<span class="co">#&gt;   City = col_character(),</span>
<span class="co">#&gt;   State = col_character(),</span>
<span class="co">#&gt;   Metro = col_character(),</span>
<span class="co">#&gt;   CountyName = col_character()</span>
<span class="co">#&gt; )</span>
<span class="co">#&gt; See spec(...) for full column specifications.</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(citytop)[<span class="dv">1</span><span class="op">:</span><span class="dv">8</span>]
<span class="co">#&gt; [1] "RegionID"   "RegionName" "City"       "State"      "Metro"     </span>
<span class="co">#&gt; [6] "CountyName" "SizeRank"   "1996-04"</span>

<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/dim">dim</a></span>(citytop)
<span class="co">#&gt; [1]   1 283</span></code></pre></div>
<p>Some of these files are quite large, and may take time to read in. It is recommended to immediately filter with <code><a href="https://dplyr.tidyverse.org/reference/filter.html">dplyr::filter()</a></code> as the file is read rather than keeping the whole dataset in memory (unless you have a use for all of the regions in your analysis).</p>
<p>The first 3 to 7 (depending on the dataset) columns returned correspond to geographic ID information, while the remaining columns are monthly time series observations. With only a few commands we can melt the data into a format that is ready for visualization.</p>
<p>It’s clear that our home is valued ($231,234) well above the median value for the zipcode, but this particular city appears to be much cheaper than the rest of the state of Kansas. It looks like Newton and Kansas did not recieve the worst of the housing crisis, and that the city and state are on a sharp upward trend.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#formatting with tidyr and zoo</span>
topmelted &lt;-<span class="st"> </span>citytop <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span>tidyr<span class="op">::</span><span class="kw"><a href="https://tidyr.tidyverse.org/reference/gather.html">gather</a></span>( <span class="dt">key=</span><span class="st">'Date'</span>, <span class="dt">value=</span><span class="st">'MedianPrice'</span>,<span class="op">-</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">7</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">Date=</span>(<span class="kw">as.yearmon</span>(Date)))
statemelted &lt;-<span class="st"> </span>Stateseries <span class="op">%&gt;%</span>
<span class="st">  </span>tidyr<span class="op">::</span><span class="kw"><a href="https://tidyr.tidyverse.org/reference/gather.html">gather</a></span>( <span class="dt">key=</span><span class="st">'Date'</span>, <span class="dt">value=</span><span class="st">'MedianPrice'</span>,<span class="op">-</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">Date=</span>(<span class="kw">as.yearmon</span>(Date)))
citymelted &lt;-<span class="st"> </span>cityseries <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span>tidyr<span class="op">::</span><span class="kw"><a href="https://tidyr.tidyverse.org/reference/gather.html">gather</a></span>( <span class="dt">key=</span><span class="st">'Date'</span>, <span class="dt">value=</span><span class="st">'MedianPrice'</span>,<span class="op">-</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">7</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">Date=</span>(<span class="kw">as.yearmon</span>(Date)))</code></pre></div>
<p><img src="zillow-vignette_files/figure-html/unnamed-chunk-17-1.png" width="816"></p>
<p>If we’re interested in renting our new property, we can compare Zillow’s rent estimate to the average for the state of Kansas. It would be more ideal to compare at a more granular level, but the rental value datasets for zipcode and county levels only contain a few of the most populus areas of the U.S., so we’re out of luck.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#The most recent rental listing value for 4BR homes in Kansas</span>
KSrentals &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_rental_listings.html">get_rental_listings</a></span>(<span class="dt">bedrooms=</span><span class="dv">4</span>, <span class="dt">rate=</span><span class="st">'PerSqFt'</span>,<span class="dt">geography=</span><span class="st">"State"</span>) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(RegionName<span class="op">==</span><span class="st">'Kansas'</span>)
<span class="co">#&gt; Parsed with column specification:</span>
<span class="co">#&gt; cols(</span>
<span class="co">#&gt;   .default = col_double(),</span>
<span class="co">#&gt;   RegionName = col_character()</span>
<span class="co">#&gt; )</span>
<span class="co">#&gt; See spec(...) for full column specifications.</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">KSrentals <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/nth.html">last</a></span>()
<span class="co">#&gt; [1] 0.8668593</span>

<span class="co">#How does our target property compare?</span>
<span class="kw"><a href="../reference/GetDeepSearchResults.html">GetDeepSearchResults</a></span>(<span class="st">'600 S. Quail Ct.'</span>, <span class="dt">zipcode=</span><span class="dv">67114</span>,
                     <span class="dt">rentzestimate=</span><span class="ot">TRUE</span>, <span class="dt">api_key=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/options">getOption</a></span>(<span class="st">'ZillowR-zws_id'</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">rentpersqft =</span> rentzestimate<span class="op">/</span>finishedSqFt) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(rentpersqft)
<span class="co">#&gt; # A tibble: 1 x 1</span>
<span class="co">#&gt;   rentpersqft</span>
<span class="co">#&gt;         &lt;dbl&gt;</span>
<span class="co">#&gt; 1       0.608</span></code></pre></div>
<p>The most recent observation suggests that rent in Kansas is almost $0.87 per square foot for 4 bedroom homes, but our target home’s estimated rent value is approximately $0.58. This generally holds in line with what we found with the property value previously. Our new home is much cheaper than the rest of the state.</p>
</div>
<div id="manipulate-the-xml-data-yourself-with-rawtrue" class="section level2">
<h2 class="hasAnchor">
<a href="#manipulate-the-xml-data-yourself-with-rawtrue" class="anchor"></a>Manipulate the XML Data Yourself with <code>raw=TRUE</code>
</h2>
<p>In order to produce tidy and useful dataframe output with the functions in <code>realEstAnalytics</code>, the XML data returned from the API must be untangled. In the process, some data may be ignored or missed. If you’re a skilled XML data cleaner, you can take your shot at extracting and cleaning the data by setting <code>raw=TRUE</code> in any of the functions that call Zillow’s API. The return of the function is now the raw XML data instead of a dataframe, which can then be manipulated with a variety of packages (<code>xml2</code> is our recommendation).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/GetDeepSearchResults.html">GetDeepSearchResults</a></span>(<span class="st">'600 S. Quail Ct.'</span>, <span class="dt">zipcode=</span><span class="dv">67114</span>,
                     <span class="dt">rentzestimate=</span><span class="ot">TRUE</span>, <span class="dt">api_key=</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/options">getOption</a></span>(<span class="st">'ZillowR-zws_id'</span>),
                     <span class="dt">raw=</span><span class="ot">TRUE</span>) <span class="co">#%&gt;% xml2::xml_children()</span>
<span class="co">#&gt; {xml_document}</span>
<span class="co">#&gt; &lt;searchresults schemaLocation="http://www.zillow.com/static/xsd/SearchResults.xsd https://www.zillowstatic.com/vstatic/80d5e73/static/xsd/SearchResults.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SearchResults="http://www.zillow.com/static/xsd/SearchResults.xsd"&gt;</span>
<span class="co">#&gt; [1] &lt;request&gt;\n  &lt;address&gt;600 S. Quail Ct.&lt;/address&gt;\n  &lt;citystatezip&gt;67 ...</span>
<span class="co">#&gt; [2] &lt;message&gt;\n  &lt;text&gt;Request successfully processed&lt;/text&gt;\n  &lt;code&gt;0&lt; ...</span>
<span class="co">#&gt; [3] &lt;response&gt;\n  &lt;results&gt;\n    &lt;result&gt;\n      &lt;zpid&gt;1340244&lt;/zpid&gt;\n  ...</span></code></pre></div>
<p>The returned XML document contains the request sent to the API, the message from the API call (success or not), and the response which contains the data requested. A previous package for Zillow’s API in R, called <code>ZillowR</code>, returned only the raw XML as above. The <code>realEstAnalytics</code> package retains this option, but also allows gives you the option to bypass the extraction/cleaning stage.</p>
</div>
<div id="further-reading" class="section level2">
<h2 class="hasAnchor">
<a href="#further-reading" class="anchor"></a>Further Reading</h2>
<ul>
<li>For further documentation on Zillow’s APIs, see <a href="https://www.zillow.com/howto/api/APIOverview.htm" class="uri">https://www.zillow.com/howto/api/APIOverview.htm</a>
<ul>
<li>For a specific API, go to <a href="https://www.zillow.com/howto/api/" class="uri">https://www.zillow.com/howto/api/</a> + ‘APIname’.htm .</li>
<li>Ex) <a href="https://www.zillow.com/howto/api/GetDeepSearchResults.htm" class="uri">https://www.zillow.com/howto/api/GetDeepSearchResults.htm</a> gives documentation for <code>GetDeepSearchResults</code>
</li>
</ul>
</li>
<li>A previous implementation of Zillow API data in R is the package <code>ZillowR</code>. Documentation can be found at <a href="https://cran.r-project.org/web/packages/ZillowR/index.html" class="uri">https://cran.r-project.org/web/packages/ZillowR/index.html</a>
</li>
<li>Suggested packages for data manipulation and XML parsing in R: <code>xml2</code>, <code>XML</code>, <code>rvest</code>, <code>tidyverse</code>, <code>purrr</code>
</li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#installing-and-loading-the-realestanalytics-package">Installing and Loading the realEstAnalytics Package</a></li>
      <li><a href="#obtaining-and-setting-your-zillow-web-service-id-api-key">Obtaining and setting your Zillow Web Service ID (API key)</a></li>
      <li><a href="#returning-property-information-with-getupdatedpropertydetailsgetdeepsearchresults-and-getdeepsearchresults_dataframe">Returning Property Information with <code>GetUpdatedPropertyDetails</code>,<code>GetDeepSearchResults</code> and <code>GetDeepSearchResults_dataframe</code></a></li>
      <li><a href="#finding-comparable-properties-with-getcomps-and-getdeepcomps">Finding Comparable Properties with <code>GetComps</code> and <code>GetDeepComps</code></a></li>
      <li><a href="#retrieving-basic-property-value-estimates-with-getzestimate">Retrieving Basic Property Value Estimates with <code>GetZestimate</code></a></li>
      <li><a href="#combining-the-api-calls-to-build-a-local-housing-dataset-note-of-caution">Combining the API Calls to Build a Local Housing Dataset: Note of Caution</a></li>
      <li><a href="#home-price-charts-with-getchart">Home Price Charts with <code>GetChart</code></a></li>
      <li><a href="#geographic-region-time-series-data-with-get_zhvi_series-and-get_rental_listings">Geographic Region Time Series Data with <code>Get_ZHVI_series</code> and <code>Get_rental_listings</code></a></li>
      <li><a href="#manipulate-the-xml-data-yourself-with-rawtrue">Manipulate the XML Data Yourself with <code>raw=TRUE</code></a></li>
      <li><a href="#further-reading">Further Reading</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Xiyuan Sun, Gani Agadilov, Oscar Aguilar, Steve Harms.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
