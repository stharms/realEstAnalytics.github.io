<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Steve Harms" />

<meta name="date" content="2019-04-28" />

<title>Exploring Zillow Real Estate Data: Introduction to realEstAnalytics</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' || rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">Exploring Zillow Real Estate Data: Introduction to realEstAnalytics</h1>
<h4 class="author"><em>Steve Harms</em></h4>
<h4 class="date"><em>2019-04-28</em></h4>



<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>Zillow has collected and analyzed enormous amounts of property data in order to help prospective buyers, sellers, and renters make informed decisions in their real estate transactions. Zillow has been kind enough to make much of this data available to the public through its APIs and other locations on their site. This vignette is an introduction to the <code>realEstAnalytics</code> package, which contains several functions that supply calls to Zillow’s Real Estate API. The returned data are available in their raw XML form, or in a tidy format that allows for quick and clean manipulation and analysis of the data.</p>
</div>
<div id="installing-and-loading-the-realestanalytics-package" class="section level2">
<h2>Installing and Loading the realEstAnalytics Package</h2>
<p>The <code>realEstAnalytics</code> package is hosted on github. It can be installed with the <code>devtools</code> package, and then loaded as with any other <code>R</code> package.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#installing and loading realEstAnalytics</span>
devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">'xiyuansun/realEstAnalytics'</span>)

<span class="kw">library</span>(realEstAnalytics)</code></pre></div>
<p><code>realEstAnalytics</code> does not have any dependencies other than the latest version of <code>R</code>, but does import functions from a number of other packages to aid in reading and tidying the XML data. See the documentation for this list, and be careful with the namespaces of any other packages you may be using in conjunction with <code>realEstAnalytics</code>.</p>
</div>
<div id="obtaining-and-setting-your-zillow-web-service-id-api-key" class="section level2">
<h2>Obtaining and setting your Zillow Web Service ID (API key)</h2>
<p>Before you can make any calls to any of Zillow’s APIs, you must register with Zillow by signing up at <a href="https://www.zillow.com/howto/api/APIOverview.htm" class="uri">https://www.zillow.com/howto/api/APIOverview.htm</a> (make sure you read the Terms of Service!). Once you have registered, Zillow will send you a unique API key, formally called a ZWSID. Keep this in a safe, non-public place to be referenced later.</p>
<p>Before we go further, it should be noted that Zillow will prevent excessive calls, and thus may block your ZWSID if you issue more than 1,000 API requests in a day (so be careful!).</p>
<p>Once you have obtained your ZWSID, you can set it in your <code>R</code> session with the <code>zillow_web_service_id()</code> function and retrieve it with <code>getOption('ZillowR-zws_id')</code> :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#set the ZWS_ID</span>
<span class="kw">set_zillow_web_service_id</span>(<span class="st">'YOUR_API_KEY'</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#retrieve the current ZWS_ID in use</span>
zapi_key =<span class="st"> </span><span class="kw">getOption</span>(<span class="st">'ZillowR-zws_id'</span>)</code></pre></div>
<p>It is helpful to set this when you start your session, so that you do not need to continually reference it if making many calls to the API.</p>
</div>
<div id="returning-property-information-with-getupdatedpropertydetailsgetdeepsearchresults-and-getdeepsearchresults_dataframe" class="section level2">
<h2>Returning Property Information with <code>GetUpdatedPropertyDetails</code>,<code>GetDeepSearchResults</code> and <code>GetDeepSearchResults_dataframe</code></h2>
<p>Suppose we’re interested in moving to Newton, KS, and are considering a number of different homes in the area for purchase. One particular home we’re interested in is located at 600 S. Quail Ct. in Newton. We can obtain information on the property using the <code>DeepSearchResults</code> function, which will pull the data corresponding to all of the Zillow Property IDs at a given address.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">GetDeepSearchResults</span>(<span class="st">'600 S. Quail Ct.'</span>, <span class="dt">city=</span><span class="st">'Newton'</span>,<span class="dt">state=</span><span class="st">'KS'</span>, <span class="dt">zipcode=</span><span class="ot">NULL</span>,
                     <span class="dt">api_key=</span><span class="kw">getOption</span>(<span class="st">'ZillowR-zws_id'</span>))
<span class="co">#&gt; # A tibble: 1 x 26</span>
<span class="co">#&gt;   address zipcode city  state   lat  long region_name region_id type </span>
<span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;</span>
<span class="co">#&gt; 1 600 S ~ 67114   Newt~ KS     38.0 -97.3 Newton      19619     city </span>
<span class="co">#&gt; # ... with 17 more variables: zestimate &lt;dbl&gt;, zest_lastupdated &lt;date&gt;,</span>
<span class="co">#&gt; #   zest_monthlychange &lt;dbl&gt;, zest_percentile &lt;dbl&gt;, zestimate_low &lt;dbl&gt;,</span>
<span class="co">#&gt; #   zestimate_high &lt;dbl&gt;, zpid &lt;chr&gt;, bathrooms &lt;dbl&gt;, bedrooms &lt;dbl&gt;,</span>
<span class="co">#&gt; #   finishedSqFt &lt;dbl&gt;, lastSoldDate &lt;chr&gt;, lastSoldPrice &lt;dbl&gt;,</span>
<span class="co">#&gt; #   lotSizeSqFt &lt;dbl&gt;, taxAssessment &lt;dbl&gt;, taxAssessmentYear &lt;dbl&gt;,</span>
<span class="co">#&gt; #   totalRooms &lt;dbl&gt;, yearBuilt &lt;dbl&gt;</span></code></pre></div>
<p>The function returns a dataframe with variables corresponding to address and geographic location, as well as the property’s Zillow property ID (<code>zpid</code>) and information corresponding to the Zestimate, which is Zillow’s proprietary algorithm for estimating the property value. Additionally, there are variables corresponding to the living space of the house (<code>bedrooms</code>,<code>bathrooms</code>,<code>finishedSqFt</code>, etc.), and property tax information. For example, our property has a Zillow estimated value of $230,830, which is quite close to the last sale price of $230,000 and well above the assessed property tax value of $214,800.</p>
<p>Note that we did not need to supply a zip code argument. In order for <code>DeepSearchResults</code> to work, we need only to specify either the city/state combination OR the zipcode. Sometimes it may help the search to be more specific by specifying the zipcode. The following code will produce the same result using only zipcode but no city/state combination:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">GetDeepSearchResults</span>(<span class="st">'600 S. Quail Ct.'</span>, <span class="dt">zipcode=</span><span class="dv">67114</span>,
                     <span class="dt">rentzestimate=</span><span class="ot">TRUE</span>, <span class="dt">api_key=</span><span class="kw">getOption</span>(<span class="st">'ZillowR-zws_id'</span>))
<span class="co">#&gt; # A tibble: 1 x 31</span>
<span class="co">#&gt;   address zipcode city  state   lat  long region_name region_id type </span>
<span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;</span>
<span class="co">#&gt; 1 600 S ~ 67114   Newt~ KS     38.0 -97.3 Newton      19619     city </span>
<span class="co">#&gt; # ... with 22 more variables: zestimate &lt;dbl&gt;, zest_lastupdated &lt;date&gt;,</span>
<span class="co">#&gt; #   zest_monthlychange &lt;dbl&gt;, zest_percentile &lt;dbl&gt;, zestimate_low &lt;dbl&gt;,</span>
<span class="co">#&gt; #   zestimate_high &lt;dbl&gt;, rentzestimate &lt;dbl&gt;, rent_lastupdated &lt;date&gt;,</span>
<span class="co">#&gt; #   rent_monthlychange &lt;dbl&gt;, rentzestimate_low &lt;dbl&gt;,</span>
<span class="co">#&gt; #   rentzestimate_high &lt;dbl&gt;, zpid &lt;chr&gt;, bathrooms &lt;dbl&gt;, bedrooms &lt;dbl&gt;,</span>
<span class="co">#&gt; #   finishedSqFt &lt;dbl&gt;, lastSoldDate &lt;chr&gt;, lastSoldPrice &lt;dbl&gt;,</span>
<span class="co">#&gt; #   lotSizeSqFt &lt;dbl&gt;, taxAssessment &lt;dbl&gt;, taxAssessmentYear &lt;dbl&gt;,</span>
<span class="co">#&gt; #   totalRooms &lt;dbl&gt;, yearBuilt &lt;dbl&gt;</span></code></pre></div>
<p>Additionally, we set <code>rentzestimate=TRUE</code> in the previous example, which tells the API call to return the Zillow estimated rental price data for the property in addition to the Zestimate for the property.</p>
<p>One note of caution when using <code>GetDeepSearchResults</code> is that it will return the results for ALL of the Zillow property IDs at an address, which can cause difficulties if one is trying to get results for multiple addresses at once, such as using the function in conjunction with the <code>apply()</code> family of functions. To avoid this, one may be able to use <code>GetDeepSearchResults_dataframe</code>, which takes a data frame of addresses as its arguments.</p>
<p>Suppose we want to look at the results for several results at once, and we have the data stored in a data frame named <code>newtonaddresses</code> in our environment. To get the search results for the full data frame, all we need to do is supply <code>GetDeepSearchResults_dataframe</code> with the data and the column numbers corresponding to the geographic information:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr)
<span class="kw">library</span>(magrittr)
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'magrittr'</span>
<span class="co">#&gt; The following object is masked from 'package:purrr':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     set_names</span>
<span class="co">#&gt; The following object is masked from 'package:tidyr':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     extract</span>
addresses &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">'733 Normandy Ct.'</span>,
  <span class="st">'600 S. Quail Ct.'</span>,
  <span class="st">'105 S Logan St.'</span>,
  <span class="st">'1412 W. 8th St.'</span>,
  <span class="st">'2801 Goldenrod Rd.'</span>,
  <span class="st">'2309 Ivy Ave.'</span>,
  <span class="st">'121 S Hess Ave.'</span>,
  <span class="st">'321 E Vesper St.'</span>,
  <span class="st">'6219 NW Parkview St.'</span>,
  <span class="st">'623 Meadowlark Ln.'</span>
  )

cities &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">rep</span>(<span class="st">'Newton'</span>, <span class="dt">times=</span><span class="dv">4</span>),<span class="st">'North Newton'</span>,<span class="st">'North Newton'</span>,
            <span class="st">'Hesston'</span>,<span class="st">'Hesston'</span>,<span class="st">'Park City'</span>, <span class="st">'Newton'</span>)

zips &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">rep</span>(<span class="dv">67114</span>, <span class="dt">times =</span><span class="dv">4</span>), <span class="dv">67117</span>,<span class="dv">67117</span>,<span class="dv">67062</span>,<span class="dv">67062</span>,<span class="dv">67219</span>,<span class="dv">67114</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">as.character</span>()

state &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="st">'KS'</span>, <span class="dt">times=</span><span class="kw">length</span>(zips))

addex &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">address=</span>addresses,<span class="dt">zipcode=</span>zips,<span class="dt">city=</span>cities,<span class="dt">state=</span>state)

newtonaddresses &lt;-<span class="st"> </span><span class="kw">GetComps</span>(<span class="dv">1340244</span>, <span class="dt">count=</span><span class="dv">20</span>, <span class="dt">api_key =</span> <span class="kw">getOption</span>(<span class="st">'ZillowR-zws_id'</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(address,zipcode,city,state) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate_all</span>(as.character) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">rbind</span>(<span class="kw">c</span>(<span class="st">'3425 Locust St.'</span>, <span class="st">'64109'</span>, <span class="st">'Kansas City'</span>, <span class="st">'MO'</span>), addex) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">sample_n</span>(<span class="dt">size=</span><span class="dv">32</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#there are 32 addresses, some in different zipcodes, to look up</span>
<span class="co">#GetDeepSearchResults_dataframe will get the info for us:</span>

<span class="kw">GetDeepSearchResults_dataframe</span>(<span class="dt">.df=</span>newtonaddresses,
                               <span class="dt">col.address=</span><span class="dv">1</span> , <span class="dt">col.zipcode=</span><span class="dv">2</span> , <span class="dt">col.city=</span><span class="dv">3</span> , <span class="dt">col.state=</span><span class="dv">4</span>,
                               <span class="dt">api_key=</span><span class="kw">getOption</span>(<span class="st">'ZillowR-zws_id'</span>))</code></pre></div>
<p>If we want to find out more characteristics of the property that we could not find with <code>GetDeepSearchResults</code>, the function <code>GetUpdatedPropertyDetails</code> may help us out. It takes a Zillow Property ID and returns much of the non-value information from the search functions, as well as additional information about parking, HVAC, appliances, and more:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">exdetails &lt;-<span class="st"> </span><span class="kw">GetUpdatedPropertyDetails</span>(<span class="dt">zpid=</span><span class="dv">93961896</span> ,
                           <span class="dt">api_key=</span> <span class="kw">getOption</span>(<span class="st">'ZillowR-zws_id'</span>))

<span class="kw">names</span>(exdetails)
<span class="co">#&gt;  [1] &quot;address&quot;          &quot;zipcode&quot;          &quot;city&quot;            </span>
<span class="co">#&gt;  [4] &quot;state&quot;            &quot;lat&quot;              &quot;long&quot;            </span>
<span class="co">#&gt;  [7] &quot;useCode&quot;          &quot;bedrooms&quot;         &quot;bathrooms&quot;       </span>
<span class="co">#&gt; [10] &quot;finishedSqFt&quot;     &quot;lotSizeSqFt&quot;      &quot;yearBuilt&quot;       </span>
<span class="co">#&gt; [13] &quot;numFloors&quot;        &quot;numRooms&quot;         &quot;basement&quot;        </span>
<span class="co">#&gt; [16] &quot;roof&quot;             &quot;exteriorMaterial&quot; &quot;parkingType&quot;     </span>
<span class="co">#&gt; [19] &quot;heatingSources&quot;   &quot;heatingSystem&quot;    &quot;coolingSystem&quot;   </span>
<span class="co">#&gt; [22] &quot;appliances&quot;       &quot;floorCovering&quot;    &quot;rooms&quot;           </span>
<span class="co">#&gt; [25] &quot;currentMonth&quot;     &quot;total&quot;</span></code></pre></div>
</div>
<div id="finding-comparable-properties-with-getcomps-and-getdeepcomps" class="section level2">
<h2>Finding Comparable Properties with <code>GetComps</code> and <code>GetDeepComps</code></h2>
<p>For every property, Zillow calculates a “Compscore” of comparable properties in the area. The ‘Compscore’ attribute is representative of the relevance of each property to the target, with a score of 0 being the closest and higher Compscores being less relevant. We have two options for API calls: <code>GetComps</code>, which retrieves only geographic, Zestimate, and Compscore information for the comparables, and <code>GetDeepComps</code>, which returns everything from <code>GetComps</code> as well as the specific property data that one would acquire through <code>GetDeepSearchResults</code>.</p>
<p>We can retrieve up to 25 comparable properties with the <code>count</code> argument, although one should be careful not to exceed Zillow’s API limit by calling this repeatedly. Note here that, instead of an address, these functions take the specific Zillow property ID (zpid) for the property, which can be found by first calling <code>GetDeepSearchResults</code> for the address.</p>
<p>Are we getting a good deal on our home at 600 S. Quail Court? We can look at the information on comparable recently sold properties in the area:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="co">#retrieve the zpid from GetDeepSearchResults</span>
zpidex &lt;-<span class="st"> </span><span class="kw">GetDeepSearchResults</span>(<span class="st">'600 S. Quail Ct.'</span>, <span class="dt">zipcode=</span><span class="dv">67114</span>,
                     <span class="dt">rentzestimate=</span><span class="ot">TRUE</span>, <span class="dt">api_key=</span><span class="kw">getOption</span>(<span class="st">'ZillowR-zws_id'</span>))<span class="op">$</span>zpid

<span class="co">#GetComps for the '600 S. Quail Ct.' address</span>
<span class="kw">GetComps</span>(zpidex, <span class="dt">count=</span><span class="dv">10</span>, <span class="dt">rentzestimate=</span><span class="ot">TRUE</span>, <span class="dt">api_key =</span> <span class="kw">getOption</span>(<span class="st">'ZillowR-zws_id'</span>))
<span class="co">#&gt; # A tibble: 11 x 22</span>
<span class="co">#&gt;    address zipcode city  state   lat  long region_name region_id type </span>
<span class="co">#&gt;    &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;</span>
<span class="co">#&gt;  1 600 S ~ 67114   Newt~ KS     38.0 -97.3 Newton      19619     city </span>
<span class="co">#&gt;  2 2137 B~ 67114   Newt~ KS     38.0 -97.4 Newton      19619     city </span>
<span class="co">#&gt;  3 2112 B~ 67114   Newt~ KS     38.0 -97.4 Newton      19619     city </span>
<span class="co">#&gt;  4 427 Vi~ 67114   Newt~ KS     38.0 -97.3 Newton      19619     city </span>
<span class="co">#&gt;  5 410 Vi~ 67114   Newt~ KS     38.0 -97.3 Newton      19619     city </span>
<span class="co">#&gt;  6 2109 S~ 67114   Newt~ KS     38.0 -97.3 Newton      19619     city </span>
<span class="co">#&gt;  7 605 S ~ 67114   Newt~ KS     38.0 -97.3 Newton      19619     city </span>
<span class="co">#&gt;  8 605 Au~ 67114   Newt~ KS     38.0 -97.3 Newton      19619     city </span>
<span class="co">#&gt;  9 506 Au~ 67114   Newt~ KS     38.0 -97.3 Newton      19619     city </span>
<span class="co">#&gt; 10 618 Au~ 67114   Newt~ KS     38.0 -97.3 Newton      19619     city </span>
<span class="co">#&gt; 11 3000 A~ 67114   Newt~ KS     38.0 -97.3 Newton      19619     city </span>
<span class="co">#&gt; # ... with 13 more variables: zestimate &lt;dbl&gt;, zest_lastupdated &lt;date&gt;,</span>
<span class="co">#&gt; #   zest_monthlychange &lt;dbl&gt;, zest_percentile &lt;dbl&gt;, zestimate_low &lt;dbl&gt;,</span>
<span class="co">#&gt; #   zestimate_high &lt;dbl&gt;, rentzestimate &lt;dbl&gt;, rent_lastupdated &lt;date&gt;,</span>
<span class="co">#&gt; #   rent_monthlychange &lt;dbl&gt;, rentzestimate_low &lt;dbl&gt;,</span>
<span class="co">#&gt; #   rentzestimate_high &lt;dbl&gt;, zpid &lt;chr&gt;, compscore &lt;dbl&gt;</span>

<span class="co">#GetDeepComps returns the same information as GetComps, with additional property data</span>
<span class="kw">GetDeepComps</span>(zpidex, <span class="dt">count=</span><span class="dv">10</span>, <span class="dt">rentzestimate=</span><span class="ot">FALSE</span>, <span class="dt">api_key =</span> <span class="kw">getOption</span>(<span class="st">'ZillowR-zws_id'</span>))
<span class="co">#&gt; # A tibble: 11 x 27</span>
<span class="co">#&gt;    address zipcode city  state   lat  long region_name region_id type </span>
<span class="co">#&gt;    &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;</span>
<span class="co">#&gt;  1 600 S ~ 67114   Newt~ KS     38.0 -97.3 Newton      19619     city </span>
<span class="co">#&gt;  2 2137 B~ 67114   Newt~ KS     38.0 -97.4 Newton      19619     city </span>
<span class="co">#&gt;  3 2112 B~ 67114   Newt~ KS     38.0 -97.4 Newton      19619     city </span>
<span class="co">#&gt;  4 427 Vi~ 67114   Newt~ KS     38.0 -97.3 Newton      19619     city </span>
<span class="co">#&gt;  5 410 Vi~ 67114   Newt~ KS     38.0 -97.3 Newton      19619     city </span>
<span class="co">#&gt;  6 2109 S~ 67114   Newt~ KS     38.0 -97.3 Newton      19619     city </span>
<span class="co">#&gt;  7 605 Au~ 67114   Newt~ KS     38.0 -97.3 Newton      19619     city </span>
<span class="co">#&gt;  8 506 Au~ 67114   Newt~ KS     38.0 -97.3 Newton      19619     city </span>
<span class="co">#&gt;  9 618 Au~ 67114   Newt~ KS     38.0 -97.3 Newton      19619     city </span>
<span class="co">#&gt; 10 3000 A~ 67114   Newt~ KS     38.0 -97.3 Newton      19619     city </span>
<span class="co">#&gt; 11 605 S ~ 67114   Newt~ KS     38.0 -97.3 Newton      19619     city </span>
<span class="co">#&gt; # ... with 18 more variables: zestimate &lt;dbl&gt;, zest_lastupdated &lt;date&gt;,</span>
<span class="co">#&gt; #   zest_monthlychange &lt;dbl&gt;, zest_percentile &lt;dbl&gt;, zestimate_low &lt;dbl&gt;,</span>
<span class="co">#&gt; #   zestimate_high &lt;dbl&gt;, zpid &lt;chr&gt;, compscore &lt;dbl&gt;, bathrooms &lt;dbl&gt;,</span>
<span class="co">#&gt; #   bedrooms &lt;dbl&gt;, finishedSqFt &lt;dbl&gt;, lastSoldDate &lt;chr&gt;,</span>
<span class="co">#&gt; #   lastSoldPrice &lt;dbl&gt;, lotSizeSqFt &lt;dbl&gt;, taxAssessment &lt;dbl&gt;,</span>
<span class="co">#&gt; #   taxAssessmentYear &lt;dbl&gt;, totalRooms &lt;dbl&gt;, yearBuilt &lt;dbl&gt;</span></code></pre></div>
</div>
<div id="retrieving-basic-property-value-estimates-with-getzestimate" class="section level2">
<h2>Retrieving Basic Property Value Estimates with <code>GetZestimate</code></h2>
<p>If you do not want all of the property information from <code>GetDeepSearchResults</code>, you can quickly retrieve the Zestimate and/or rent Zestimates of the property’s value with <code>GetZestimate</code>, using the Zillow property ID. This function will also take a vector of property IDs in the <code>zpid</code> argument if you want to retrieve more than one Zestimate at once:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#GetZestimate with a vector input</span>
<span class="kw">GetZestimate</span>(<span class="dt">zpids=</span><span class="kw">c</span>(zpidex,<span class="dv">109818062</span>,<span class="dv">1341669</span>,<span class="dv">1341715</span>) ,
             <span class="dt">rentzestimate=</span><span class="ot">TRUE</span> , <span class="dt">api_key=</span><span class="kw">getOption</span>(<span class="st">'ZillowR-zws_id'</span>))
<span class="co">#&gt; # A tibble: 4 x 20</span>
<span class="co">#&gt;   address zipcode city  state   lat  long region_name region_id type </span>
<span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;</span>
<span class="co">#&gt; 1 600 S ~ 67114   Newt~ KS     38.0 -97.3 Newton      19619     city </span>
<span class="co">#&gt; 2 2137 B~ 67114   Newt~ KS     38.0 -97.4 Newton      19619     city </span>
<span class="co">#&gt; 3 410 Vi~ 67114   Newt~ KS     38.0 -97.3 Newton      19619     city </span>
<span class="co">#&gt; 4 2109 S~ 67114   Newt~ KS     38.0 -97.3 Newton      19619     city </span>
<span class="co">#&gt; # ... with 11 more variables: zestimate &lt;dbl&gt;, zest_lastupdated &lt;date&gt;,</span>
<span class="co">#&gt; #   zest_monthlychange &lt;dbl&gt;, zest_percentile &lt;dbl&gt;, zestimate_low &lt;dbl&gt;,</span>
<span class="co">#&gt; #   zestimate_high &lt;dbl&gt;, rentzestimate &lt;dbl&gt;, rent_lastupdated &lt;date&gt;,</span>
<span class="co">#&gt; #   rent_monthlychange &lt;dbl&gt;, rentzestimate_low &lt;dbl&gt;,</span>
<span class="co">#&gt; #   rentzestimate_high &lt;dbl&gt;</span></code></pre></div>
</div>
<div id="combining-the-api-calls-to-build-a-local-housing-dataset" class="section level2">
<h2>Combining the API Calls to Build a Local Housing Dataset</h2>
<p>Suppose we want to build a larger dataset based on only our original address. This would facilitate an analysis of recent property sales in the general area to gain insight into the housing market.</p>
<p>We have seen how <code>GetComps</code> can get a few comparable properties in the area. If we want to build a larger dataset, we can chain the <code>GetDeepSearchResults</code>,<code>GetComps</code>, and <code>GetDeepComps</code> functions together to get more properties in an area after starting with one location. To speed the cleaning and combining, we use <code>dplyr</code> and <code>%&gt;%</code> from <code>magrittr</code> in the tidyverse family, with an <code>lapply</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(purrr)
<span class="co">#build a dataset in one sequence of commands</span>
<span class="co">#starting from one address</span>
richdata &lt;-<span class="st"> </span><span class="kw">GetDeepSearchResults</span>(<span class="st">'600 S. Quail Ct.'</span>,
                                 <span class="dt">zipcode=</span><span class="dv">67114</span>,
                     <span class="dt">rentzestimate=</span><span class="ot">TRUE</span>,
                     <span class="dt">api_key=</span><span class="kw">getOption</span>(<span class="st">'ZillowR-zws_id'</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(zpid) <span class="op">%&gt;%</span>
<span class="st">  </span>purrr<span class="op">::</span><span class="kw">as_vector</span>(<span class="st">&quot;character&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">GetComps</span>(<span class="dt">count=</span><span class="dv">10</span>, <span class="dt">api_key=</span><span class="kw">getOption</span>(<span class="st">'ZillowR-zws_id'</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(zpid) <span class="op">%&gt;%</span>
<span class="st">  </span>purrr<span class="op">::</span><span class="kw">as_vector</span>(<span class="st">&quot;character&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">lapply</span>(GetDeepComps,
         <span class="dt">count=</span><span class="dv">10</span>,
         <span class="dt">api_key=</span><span class="kw">getOption</span>(<span class="st">'ZillowR-zws_id'</span>)) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">bind_rows</span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">distinct</span>()

<span class="kw">head</span>(richdata)
<span class="co">#&gt; # A tibble: 6 x 27</span>
<span class="co">#&gt;   address zipcode city  state   lat  long region_name region_id type </span>
<span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;     &lt;chr&gt;</span>
<span class="co">#&gt; 1 600 S ~ 67114   Newt~ KS     38.0 -97.3 Newton      19619     city </span>
<span class="co">#&gt; 2 919 N ~ 67114   Newt~ KS     38.1 -97.3 Newton      19619     city </span>
<span class="co">#&gt; 3 2137 B~ 67114   Newt~ KS     38.0 -97.4 Newton      19619     city </span>
<span class="co">#&gt; 4 2112 B~ 67114   Newt~ KS     38.0 -97.4 Newton      19619     city </span>
<span class="co">#&gt; 5 427 Vi~ 67114   Newt~ KS     38.0 -97.3 Newton      19619     city </span>
<span class="co">#&gt; 6 410 Vi~ 67114   Newt~ KS     38.0 -97.3 Newton      19619     city </span>
<span class="co">#&gt; # ... with 18 more variables: zestimate &lt;dbl&gt;, zest_lastupdated &lt;date&gt;,</span>
<span class="co">#&gt; #   zest_monthlychange &lt;dbl&gt;, zest_percentile &lt;dbl&gt;, zestimate_low &lt;dbl&gt;,</span>
<span class="co">#&gt; #   zestimate_high &lt;dbl&gt;, zpid &lt;chr&gt;, compscore &lt;dbl&gt;, bathrooms &lt;dbl&gt;,</span>
<span class="co">#&gt; #   bedrooms &lt;dbl&gt;, finishedSqFt &lt;dbl&gt;, lastSoldDate &lt;chr&gt;,</span>
<span class="co">#&gt; #   lastSoldPrice &lt;dbl&gt;, lotSizeSqFt &lt;dbl&gt;, taxAssessment &lt;dbl&gt;,</span>
<span class="co">#&gt; #   taxAssessmentYear &lt;dbl&gt;, totalRooms &lt;dbl&gt;, yearBuilt &lt;dbl&gt;</span>
<span class="kw">dim</span>(richdata)
<span class="co">#&gt; [1] 100  27</span></code></pre></div>
<p>What just happened here? We used our original address and obtained its Zillow property ID with <code>GetDeepSearchResults</code>, then used that ZPID with <code>GetComps</code> to get 10 comparable properties. Then we took the ZPIDs from those comparables and applied <code>GetDeepComps</code> to each, resulting in an expanded number of properties. We can then bind all of the data together with <code>bind_rows()</code> from the <code>dplyr</code> package, and take the distinct addresses to get a rich dataset for our area for purposes of analysis.</p>
<p><em>Note:</em> In this example we sent over 100 requests to the API. Remember that Zillow limits the number of requests you can make in a day, so be careful using these functions in conjunction with <code>apply()</code> or similar functions. You may get locked out!</p>
</div>
<div id="home-price-charts-with-getchart" class="section level2">
<h2>Home Price Charts with <code>GetChart</code></h2>
<p>You can obtain a URL for a the Zestimates for a property with <code>GetChart</code>. The return from the API is a link to the image of the chart, which can be displayed in <code>R</code> with whatever package you prefer. Sometimes the URLs need some cleaning in order to correctly be able to read the image.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(XML)
<span class="co">#Get Chart returns a list with the API's response</span>
<span class="co">#The chart URL is in the `response` element in the `url` attribute</span>
chartex &lt;-<span class="st"> </span><span class="kw">GetChart</span>(<span class="dt">zpid =</span> <span class="dv">93961896</span>, <span class="dt">unit_type =</span> <span class="st">'dollar'</span>, <span class="dt">width =</span> <span class="dv">600</span>, <span class="dt">height =</span> <span class="dv">300</span>,
          <span class="dt">chartDuration =</span> <span class="st">'10years'</span>, <span class="dt">zws_id =</span> <span class="kw">getOption</span>(<span class="st">'ZillowR-zws_id'</span>))
XML<span class="op">::</span><span class="kw">names.XMLNode</span>(chartex<span class="op">$</span>response)
<span class="co">#&gt;             url   graphsanddata </span>
<span class="co">#&gt;           &quot;url&quot; &quot;graphsanddata&quot;</span></code></pre></div>
</div>
<div id="geographic-region-time-series-data-with-get_zhvi_series-and-get_rental_listings" class="section level2">
<h2>Geographic Region Time Series Data with <code>Get_ZHVI_series</code> and <code>Get_rental_listings</code></h2>
<p>Zillow also supplies some of its research data and aggregated listings data, hosted at <a href="https://www.zillow.com/research/data/" class="uri">https://www.zillow.com/research/data/</a> . These are static .csv files and don’t require a Zillow Web Service ID for download, however the <code>realEstAnalytics</code> package supplies functions that can read these files directly into <code>R</code> and save you the time of downloading and saving them locally. <code>Get_ZHVI_series</code> and <code>Get_rental_listings</code> read the .csv files and return a dataframe for a variety of different series for a specified <code>geography</code>. The options available for these two functions are listed below.</p>
<p><code>get_ZHVI_series()</code>: ‘-’ implies argument default.</p>
<table>
<thead>
<tr class="header">
<th>ZHVI Series Name</th>
<th align="center"><code>bedrooms</code></th>
<th align="center"><code>allhomes</code></th>
<th align="center"><code>tier</code></th>
<th align="center"><code>summary</code></th>
<th align="center"><code>other</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ZHVI Summary (Current Month)</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center"><code>TRUE</code></td>
<td align="center">-</td>
</tr>
<tr class="even">
<td>ZHVI All Homes (SFR, Condo/Co-op)</td>
<td align="center">-</td>
<td align="center"><code>TRUE</code></td>
<td align="center"><code>'ALL'</code></td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr class="odd">
<td>ZHVI All Homes- Bottom Tier</td>
<td align="center">-</td>
<td align="center"><code>TRUE</code></td>
<td align="center"><code>'B'</code></td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr class="even">
<td>ZHVI All Homes- Top Tier</td>
<td align="center">-</td>
<td align="center"><code>TRUE</code></td>
<td align="center"><code>'T'</code></td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr class="odd">
<td>ZHVI Condo/Co-op</td>
<td align="center"><code>'C'</code></td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr class="even">
<td>ZHVI Single-Family Homes</td>
<td align="center"><code>'SFR'</code></td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr class="odd">
<td>ZHVI 1-Bedroom</td>
<td align="center">1</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr class="even">
<td>ZHVI 2-Bedroom</td>
<td align="center">2</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr class="odd">
<td>ZHVI 3-Bedroom</td>
<td align="center">3</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr class="even">
<td>ZHVI 4-Bedroom</td>
<td align="center">4</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr class="odd">
<td>ZHVI 5+ Bedroom</td>
<td align="center">5</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr class="even">
<td>Median Home Value Per Sq Ft</td>
<td align="center">-</td>
<td align="center"><code>TRUE</code></td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center"><code>Median Home Price Per Sq Ft</code></td>
</tr>
<tr class="odd">
<td>Increasing Values (%)</td>
<td align="center">-</td>
<td align="center"><code>TRUE</code></td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center"><code>Increasing</code></td>
</tr>
<tr class="even">
<td>Decreasing Values (%)</td>
<td align="center">-</td>
<td align="center"><code>TRUE</code></td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center"><code>Decreasing</code></td>
</tr>
</tbody>
</table>
<p><code>get_rental_listings</code>: ‘-’ implies argument default.</p>
<table>
<thead>
<tr class="header">
<th align="left">Median Rental List Price ($) Series</th>
<th align="center"><code>bedrooms</code></th>
<th align="center"><code>type</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">SFR, Condo/Co-op</td>
<td align="center">-</td>
<td align="center"><code>'SFR/Condo'</code></td>
</tr>
<tr class="even">
<td align="left">Multifamily 5+ Units</td>
<td align="center">-</td>
<td align="center"><code>'Multi'</code></td>
</tr>
<tr class="odd">
<td align="left">Condo/Co-op</td>
<td align="center">-</td>
<td align="center"><code>'Condo/Co-op'</code></td>
</tr>
<tr class="even">
<td align="left">Duplex/Triplex</td>
<td align="center">-</td>
<td align="center"><code>'Duplex'</code></td>
</tr>
<tr class="odd">
<td align="left">Single-Family Residence</td>
<td align="center">-</td>
<td align="center"><code>'SFR'</code></td>
</tr>
<tr class="even">
<td align="left">Studio</td>
<td align="center">-</td>
<td align="center"><code>'Studio'</code></td>
</tr>
<tr class="odd">
<td align="left">1-Bedroom</td>
<td align="center">1</td>
<td align="center">-</td>
</tr>
<tr class="even">
<td align="left">2-Bedroom</td>
<td align="center">2</td>
<td align="center">-</td>
</tr>
<tr class="odd">
<td align="left">3-Bedroom</td>
<td align="center">3</td>
<td align="center">-</td>
</tr>
<tr class="even">
<td align="left">4-Bedroom</td>
<td align="center">4</td>
<td align="center">-</td>
</tr>
<tr class="odd">
<td align="left">5+ Bedroom</td>
<td align="center">5</td>
<td align="center">-</td>
</tr>
</tbody>
</table>
<p>The default for the <code>get_rental_listings</code> returns the median rental list price in absolute dollars, but each series is also available adjusted for size in dollars per square foot by specifying <code>rate='PerSqFt'</code>.</p>
<p>Each call also requires a specified geographic level. Currently options for the <code>geography</code> argument are:</p>
<ul>
<li>‘Metro’</li>
<li>‘City’</li>
<li>‘State’</li>
<li>‘Neighborhood’</li>
<li>‘Zip’</li>
<li>‘County’</li>
</ul>
<p>The ‘Metro’ level also includes the aggregated U.S. information.</p>
<p>To see an example, consider once again the home we’re interested in at 600 S. Quail Ct. in Newton, Kansas. We’ve already collected data on individual comparable properties in the area, but if we’re interested in property values of the larger city, county, and state, we can pull the most recent time series data and filter each for the area we’re interested in:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#What data do we want to filter?</span>
<span class="kw">GetDeepSearchResults</span>(<span class="st">'600 S. Quail Ct.'</span>, <span class="dt">zipcode=</span><span class="dv">67114</span>,
                      <span class="dt">rentzestimate=</span><span class="ot">TRUE</span>, <span class="dt">api_key=</span><span class="kw">getOption</span>(<span class="st">'ZillowR-zws_id'</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">select</span>(zipcode,city,state,bedrooms,zestimate)

<span class="co">#Pull the data by state and zipcode for 4 bedrooms</span>
cityseries &lt;-<span class="st"> </span><span class="kw">get_ZHVI_series</span>(<span class="dt">bedrooms=</span><span class="dv">4</span>,<span class="dt">geography=</span><span class="st">&quot;Zip&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">filter</span>(RegionName<span class="op">==</span><span class="st">'67114'</span>)
<span class="co">#&gt; Parsed with column specification:</span>
<span class="co">#&gt; cols(</span>
<span class="co">#&gt;   .default = col_double(),</span>
<span class="co">#&gt;   RegionName = col_character(),</span>
<span class="co">#&gt;   City = col_character(),</span>
<span class="co">#&gt;   State = col_character(),</span>
<span class="co">#&gt;   Metro = col_character(),</span>
<span class="co">#&gt;   CountyName = col_character()</span>
<span class="co">#&gt; )</span>
<span class="co">#&gt; See spec(...) for full column specifications.</span>

Stateseries &lt;-<span class="st"> </span><span class="kw">get_ZHVI_series</span>(<span class="dt">bedrooms=</span><span class="dv">4</span>,<span class="dt">geography=</span><span class="st">&quot;State&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">filter</span>(RegionName<span class="op">==</span><span class="st">'Kansas'</span>)
<span class="co">#&gt; Parsed with column specification:</span>
<span class="co">#&gt; cols(</span>
<span class="co">#&gt;   .default = col_double(),</span>
<span class="co">#&gt;   RegionName = col_character()</span>
<span class="co">#&gt; )</span>
<span class="co">#&gt; See spec(...) for full column specifications.</span>

<span class="co">#Also, collect all top-tier home values in the city and state</span>
citytop &lt;-<span class="st"> </span><span class="kw">get_ZHVI_series</span>(<span class="dt">allhomes=</span><span class="ot">TRUE</span>, <span class="dt">tier=</span><span class="st">'T'</span>, <span class="dt">geography=</span><span class="st">&quot;Zip&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">filter</span>(RegionName<span class="op">==</span><span class="st">'67114'</span>)
<span class="co">#&gt; Parsed with column specification:</span>
<span class="co">#&gt; cols(</span>
<span class="co">#&gt;   .default = col_double(),</span>
<span class="co">#&gt;   RegionName = col_character(),</span>
<span class="co">#&gt;   City = col_character(),</span>
<span class="co">#&gt;   State = col_character(),</span>
<span class="co">#&gt;   Metro = col_character(),</span>
<span class="co">#&gt;   CountyName = col_character()</span>
<span class="co">#&gt; )</span>
<span class="co">#&gt; See spec(...) for full column specifications.</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(citytop)[<span class="dv">1</span><span class="op">:</span><span class="dv">8</span>]
<span class="co">#&gt; [1] &quot;RegionID&quot;   &quot;RegionName&quot; &quot;City&quot;       &quot;State&quot;      &quot;Metro&quot;     </span>
<span class="co">#&gt; [6] &quot;CountyName&quot; &quot;SizeRank&quot;   &quot;1996-04&quot;</span>

<span class="kw">dim</span>(citytop)
<span class="co">#&gt; [1]   1 283</span></code></pre></div>
<p>Some of these files are quite large, and may take time to read in. It is recommended to immediately filter with <code>dplyr::filter()</code> as the file is read rather than keeping the whole dataset in memory (unless you have a use for all of the regions in your analysis).</p>
<p>The first 3 to 7 (depending on the dataset) columns returned correspond to geographic ID information, while the remaining columns are monthly time series observations. With only a few commands we can melt the data into a format that is ready for visualization.</p>
<p>It’s clear that our home is valued ($231,234) well above the median value for the zipcode, but this particular city appears to be much cheaper than the rest of the state of Kansas. It looks like Newton and Kansas did not recieve the worst of the housing crisis, and that the city and state are on a sharp upward trend.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#melting the data using reshape2 and zoo</span>
topmelted &lt;-<span class="st"> </span>citytop <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span>reshape2<span class="op">::</span><span class="kw">melt</span>(<span class="dt">id=</span><span class="dv">1</span><span class="op">:</span><span class="dv">7</span>, <span class="dt">variable.name=</span><span class="st">'Date'</span>, <span class="dt">value.name=</span><span class="st">'MedianPrice'</span>) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">Date=</span>(zoo<span class="op">::</span><span class="kw">as.yearmon</span>(Date)))

statemelted &lt;-<span class="st"> </span>Stateseries <span class="op">%&gt;%</span>
<span class="st">  </span>reshape2<span class="op">::</span><span class="kw">melt</span>(<span class="dt">id=</span><span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dt">variable.name=</span><span class="st">'Date'</span>, <span class="dt">value.name=</span><span class="st">'MedianPrice'</span>) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">Date=</span>(zoo<span class="op">::</span><span class="kw">as.yearmon</span>(Date)))

citymelted &lt;-<span class="st"> </span>cityseries <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span>reshape2<span class="op">::</span><span class="kw">melt</span>(<span class="dt">id=</span><span class="dv">1</span><span class="op">:</span><span class="dv">7</span>, <span class="dt">variable.name=</span><span class="st">'Date'</span>, <span class="dt">value.name=</span><span class="st">'MedianPrice'</span>) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">Date=</span>(zoo<span class="op">::</span><span class="kw">as.yearmon</span>(Date)))</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>If we’re interested in renting our new property, we can compare Zillow’s rent estimate to the average for the state of Kansas. It would be more ideal to compare at a more granular level, but the rental value datasets for zipcode and county levels only contain a few of the most populus areas of the U.S., so we’re out of luck.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#The most recent rental listing value for 4BR homes in Kansas</span>
KSrentals &lt;-<span class="st"> </span><span class="kw">get_rental_listings</span>(<span class="dt">bedrooms=</span><span class="dv">4</span>, <span class="dt">rate=</span><span class="st">'PerSqFt'</span>,<span class="dt">geography=</span><span class="st">&quot;State&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">filter</span>(RegionName<span class="op">==</span><span class="st">'Kansas'</span>)
<span class="co">#&gt; Parsed with column specification:</span>
<span class="co">#&gt; cols(</span>
<span class="co">#&gt;   .default = col_double(),</span>
<span class="co">#&gt;   RegionName = col_character()</span>
<span class="co">#&gt; )</span>
<span class="co">#&gt; See spec(...) for full column specifications.</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">KSrentals <span class="op">%&gt;%</span><span class="st"> </span>dplyr<span class="op">::</span><span class="kw">last</span>()
<span class="co">#&gt; [1] 0.8668593</span>

<span class="co">#How does our target property compare?</span>
<span class="kw">GetDeepSearchResults</span>(<span class="st">'600 S. Quail Ct.'</span>, <span class="dt">zipcode=</span><span class="dv">67114</span>,
                     <span class="dt">rentzestimate=</span><span class="ot">TRUE</span>, <span class="dt">api_key=</span><span class="kw">getOption</span>(<span class="st">'ZillowR-zws_id'</span>)) <span class="op">%&gt;%</span>
<span class="st">  </span>dplyr<span class="op">::</span><span class="kw">mutate</span>(<span class="dt">rentpersqft =</span> rentzestimate<span class="op">/</span>finishedSqFt) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">select</span>(rentpersqft)
<span class="co">#&gt; # A tibble: 1 x 1</span>
<span class="co">#&gt;   rentpersqft</span>
<span class="co">#&gt;         &lt;dbl&gt;</span>
<span class="co">#&gt; 1       0.579</span></code></pre></div>
<p>The most recent observation suggests that rent in Kansas is almost $0.87 per square foot for 4 bedroom homes, but our target home’s estimated rent value is approximately $0.58. This generally holds in line with what we found with the property value previously. Our new home is much cheaper than the rest of the state.</p>
</div>
<div id="manipulate-the-xml-data-yourself-with-rawtrue" class="section level2">
<h2>Manipulate the XML Data Yourself with <code>raw=TRUE</code></h2>
<p>In order to produce tidy and useful dataframe output with the functions in <code>realEstAnalytics</code>, the XML data returned from the API must be untangled. In the process, some data may be ignored or missed. If you’re a skilled XML data cleaner, you can take your shot at extracting and cleaning the data by setting <code>raw=TRUE</code> in any of the functions that call Zillow’s API. The return of the function is now the raw XML data instead of a dataframe, which can then be manipulated with a variety of packages (<code>xml2</code> is our recommendation).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">GetDeepSearchResults</span>(<span class="st">'600 S. Quail Ct.'</span>, <span class="dt">zipcode=</span><span class="dv">67114</span>,
                     <span class="dt">rentzestimate=</span><span class="ot">TRUE</span>, <span class="dt">api_key=</span><span class="kw">getOption</span>(<span class="st">'ZillowR-zws_id'</span>),
                     <span class="dt">raw=</span><span class="ot">TRUE</span>) <span class="co">#%&gt;% xml2::xml_children()</span>
<span class="co">#&gt; {xml_document}</span>
<span class="co">#&gt; &lt;searchresults schemaLocation=&quot;http://www.zillow.com/static/xsd/SearchResults.xsd https://www.zillowstatic.com/vstatic/80d5e73/static/xsd/SearchResults.xsd&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:SearchResults=&quot;http://www.zillow.com/static/xsd/SearchResults.xsd&quot;&gt;</span>
<span class="co">#&gt; [1] &lt;request&gt;\n  &lt;address&gt;600 S. Quail Ct.&lt;/address&gt;\n  &lt;citystatezip&gt;67 ...</span>
<span class="co">#&gt; [2] &lt;message&gt;\n  &lt;text&gt;Request successfully processed&lt;/text&gt;\n  &lt;code&gt;0&lt; ...</span>
<span class="co">#&gt; [3] &lt;response&gt;\n  &lt;results&gt;\n    &lt;result&gt;\n      &lt;zpid&gt;1340244&lt;/zpid&gt;\n  ...</span></code></pre></div>
<p>The returned XML document contains the request sent to the API, the message from the API call (success or not), and the response which contains the data requested. A previous package for Zillow’s API in R, called <code>ZillowR</code>, returned only the raw XML as above. The <code>realEstAnalytics</code> package retains this option, but also allows gives you the option to bypass the extraction/cleaning stage.</p>
</div>
<div id="further-reading" class="section level2">
<h2>Further Reading</h2>
<ul>
<li>For further documentation on Zillow’s APIs, see <a href="https://www.zillow.com/howto/api/APIOverview.htm" class="uri">https://www.zillow.com/howto/api/APIOverview.htm</a>
<ul>
<li>For a specific API, go to <a href="https://www.zillow.com/howto/api/" class="uri">https://www.zillow.com/howto/api/</a> + ‘APIname’.htm .</li>
<li>Ex) <a href="https://www.zillow.com/howto/api/GetDeepSearchResults.htm" class="uri">https://www.zillow.com/howto/api/GetDeepSearchResults.htm</a> gives documentation for <code>GetDeepSearchResults</code></li>
</ul></li>
<li>A previous implementation of Zillow API data in R is the package <code>ZillowR</code>. Documentation can be found at <a href="https://cran.r-project.org/web/packages/ZillowR/index.html" class="uri">https://cran.r-project.org/web/packages/ZillowR/index.html</a></li>
<li>Suggested packages for data manipulation and XML parsing in R: <code>xml2</code>, <code>XML</code>, <code>rvest</code>, <code>tidyverse</code>, <code>purrr</code></li>
</ul>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
